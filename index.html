<!DOCTYPE html>
<html>
<head>
  <title>PDF.js Test</title>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.1.81/build/pdf.min.js"></script>
</head>
<body>
  <h2>PDF.js Load Test</h2>
  <input type="file" id="fileInput" accept="application/pdf">
  <button onclick="testPDF()">Test PDF</button>
  <p id="status"></p>

  <script>
    // ✅ Set correct worker path
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.1.81/build/pdf.worker.min.js';

    function testPDF() {
      const file = document.getElementById('fileInput').files[0];
      const status = document.getElementById('status');

      if (!file) {
        alert("Please upload a file.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        const typedArray = new Uint8Array(e.target.result);

        pdfjsLib.getDocument(typedArray).promise.then(pdf => {
          status.textContent = `✅ PDF loaded with ${pdf.numPages} page(s).`;
        }).catch(err => {
          status.textContent = `❌ Failed to load PDF: ${err.message}`;
          console.error(err);
        });
      };

      reader.readAsArrayBuffer(file);
    }
  </script>
</body>
</html>
